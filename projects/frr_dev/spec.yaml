
nodes:

  - name: R1
    image: slankdev/frr-dev-slankdev:7.3
    interfaces:
      - { name: net0, type: direct, args: R2#net0 }

  - name: R2
    image: slankdev/frr-dev-slankdev:7.3
    interfaces:
      - { name: net0, type: direct, args: R1#net0 }

node_configs:
  - name: R1
    cmds:
      - cmd: bash -c "enable_seg6_router.py | sh"
      - cmd: ip addr add 2001::1/64 dev net0
      - cmd: touch /etc/frr/frr.conf
      - cmd: /usr/lib/frr/frrinit.sh start
      - cmd: >-
          vtysh -c 'conf te'
          -c 'router bgp 65001'
          -c ' bgp router-id 10.255.0.1'
          -c ' neighbor 2001::2 remote-as 65002'
          -c ' !'
          -c '!'
          -c 'do write'
      - cmd: /usr/lib/frr/frrinit.sh stop

  - name: R2
    cmds:
      - cmd: bash -c "enable_seg6_router.py | sh"
      - cmd: ip addr add 2001::2/64 dev net0
      - cmd: touch /etc/frr/frr.conf
      - cmd: /usr/lib/frr/frrinit.sh start
      - cmd: >-
          vtysh -c 'conf te'
          -c 'router bgp 65002'
          -c ' bgp router-id 10.255.0.2'
          -c ' neighbor 2001::1 remote-as 65001'
          -c ' !'
          -c '!'
          -c 'do write'
      - cmd: /usr/lib/frr/frrinit.sh stop

